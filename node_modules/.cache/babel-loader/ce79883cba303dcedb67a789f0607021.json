{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { removeLoadingState, sortObjectItem } from \"../../../helpers/supportFunctions\";\nimport { GET_ITEM_LIST_DATA_ASYNC_ACTION } from \"../actions/itemList\";\n//Create a reusable itemList default payload\nexport const itemListDefaultPayload = {\n  total_count: 0,\n  incomplete_results: false,\n  items: null\n};\nexport const initialState = {\n  itemList: itemListDefaultPayload,\n  loading: [],\n  per_page: 9,\n  page: 1,\n  current_sort: {\n    key: 'login',\n    order: 'asc',\n    type: 'object'\n  }\n};\nexport const itemListSlice = createSlice({\n  name: 'itemList',\n  initialState,\n  reducers: {\n    setItemList: (state, action) => {\n      state.itemList.items = action.payload;\n    },\n    setPage: (state, action) => {\n      state.page = action.payload;\n    },\n    setCurrentSort: (state, action) => {\n      state.current_sort = action.payload;\n    },\n    resetItemList: state => {\n      //Format the itemlist state to default state\n      state.itemList = itemListDefaultPayload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(GET_ITEM_LIST_DATA_ASYNC_ACTION.pending, state => {\n      state.loading = ['GET_ITEM_LIST_DATA'];\n    }).addCase(GET_ITEM_LIST_DATA_ASYNC_ACTION.fulfilled, (state, action) => {\n      state.loading = removeLoadingState(state.loading, 'GET_ITEM_LIST_DATA');\n\n      if (action.payload.status === 200) {\n        //Sort payload with selected column by item\n        action.payload.data.items.sort(sortObjectItem(state.current_sort.key, state.current_sort.order, state.current_sort.type));\n        state.itemList = action.payload.data;\n        state.page = action.payload.page;\n      }\n\n      ;\n    });\n  }\n}); // Selectors\n\nexport const selectItemList = state => state.itemList; // Reducers and actions\n\nexport const {\n  setItemList,\n  resetItemList,\n  setPage,\n  setCurrentSort\n} = itemListSlice.actions;\nexport default itemListSlice.reducer;","map":{"version":3,"sources":["/Users/mac/Documents/junicodes/test/2021-senior-frontend-developer-mlybfy/src/react-wrapper/redux/slices/itemListSlice.ts"],"names":["createSlice","removeLoadingState","sortObjectItem","GET_ITEM_LIST_DATA_ASYNC_ACTION","itemListDefaultPayload","total_count","incomplete_results","items","initialState","itemList","loading","per_page","page","current_sort","key","order","type","itemListSlice","name","reducers","setItemList","state","action","payload","setPage","setCurrentSort","resetItemList","extraReducers","builder","addCase","pending","fulfilled","status","data","sort","selectItemList","actions","reducer"],"mappings":"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","sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { removeLoadingState, sortObjectItem} from \"../../../helpers/supportFunctions\";\nimport { GET_ITEM_LIST_DATA_ASYNC_ACTION } from \"../actions/itemList\";\nimport { RootState } from \"../store\";\n\n\nexport interface ItemListPayloadState {\n  total_count: number,\n  incomplete_results: boolean,\n  items: object[] | null\n}\n\nexport interface ItemListState {\n  itemList: {\n    items: object[] | null\n  },\n  loading: string[]\n  per_page: number,\n  page: number\n  current_sort: {\n    key: string,\n    order: string\n    type: string\n  }\n}\n\n//Create a reusable itemList default payload\nexport const itemListDefaultPayload = {\n  total_count: 0,\n  incomplete_results: false,\n  items: null\n}\n\nexport const initialState = {\n  itemList: itemListDefaultPayload,\n  loading: [],\n  per_page: 9,\n  page: 1,\n  current_sort: {key: 'login', order: 'asc', type: 'object'}\n} as ItemListState;\n\n\nexport const itemListSlice = createSlice({\n  name: 'itemList',\n  initialState,\n  \n  reducers: {\n    setItemList: (state, action: PayloadAction<object[]>) => {\n      state.itemList.items = action.payload;\n    },\n\n    setPage: (state, action: PayloadAction<number>) => {\n      state.page = action.payload;\n    },\n\n    setCurrentSort: (state, action: PayloadAction<{ key: string, order: string, type: string}>) => {\n      state.current_sort = action.payload;\n    },\n\n\n    resetItemList: (state) => {\n      //Format the itemlist state to default state\n      state.itemList = itemListDefaultPayload as ItemListPayloadState;\n    }\n  },\n\n  extraReducers: (builder) => {\n    builder\n    .addCase(GET_ITEM_LIST_DATA_ASYNC_ACTION.pending, (state) => {\n      state.loading = ['GET_ITEM_LIST_DATA'];\n    })\n    .addCase(GET_ITEM_LIST_DATA_ASYNC_ACTION.fulfilled, (state, action) => {\n      state.loading = removeLoadingState(state.loading, 'GET_ITEM_LIST_DATA')\n\n      if( action.payload.status === 200 ) {\n        //Sort payload with selected column by item\n        action.payload.data.items.sort(sortObjectItem(state.current_sort.key, state.current_sort.order, state.current_sort.type));\n        state.itemList = action.payload.data\n        state.page = action.payload.page;\n      };\n\n    });\n  }\n\n});\n\n// Selectors\nexport const selectItemList = (state: RootState) => state.itemList;\n\n// Reducers and actions\nexport const { setItemList, resetItemList, setPage, setCurrentSort} = itemListSlice.actions;\n\nexport default itemListSlice.reducer;"]},"metadata":{},"sourceType":"module"}